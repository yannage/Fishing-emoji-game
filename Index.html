<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emoji Fishing Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { text-align: center; font-family: Arial, sans-serif; background-color: #87CEEB; overflow: hidden; }
        #game-container { position: relative; width: 100vw; height: 80vh; }
        #sky { background-color: #87CEEB; height: 50%; position: relative; }
        #day-bar-container { width: 80%; height: 20px; background-color: black; margin: 10px auto; border-radius: 5px; }
        #day-bar { width: 100%; height: 100%; background-color: yellow; transition: width 2s linear; }
        #water { background-color: #1E90FF; height: 50%; position: relative; }
        #boat { position: absolute; bottom: 50%; left: 50%; transform: translate(-50%, 50%); font-size: 50px; }
        .fish { position: absolute; font-size: 40px; cursor: pointer; animation: swim 5s infinite linear alternate; }
        @keyframes swim { from { transform: translateX(-50px); } to { transform: translateX(50px); } }
        #fish-tank { margin-top: 20px; font-size: 20px; }
        #market-screen { display: none; }
        .button { display: block; padding: 10px; background: white; border: 2px solid black; margin: 10px auto; cursor: pointer; width: 150px; }
        .clouds { position: absolute; top: 10%; left: 10%; font-size: 40px; }
        #fishing-grid-container { display: none; position: absolute; top: 30%; left: 50%; transform: translate(-50%, -50%); }
        #fishing-grid { display: grid; grid-template-columns: repeat(3, 50px); grid-gap: 5px; justify-content: center; }
        .grid-cell { width: 50px; height: 50px; font-size: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .shake { animation: shake 0.2s infinite alternate; }
        @keyframes shake { from { transform: translateX(-3px); } to { transform: translateX(3px); } }
    </style>
</head>
<body>
    <h1 class="text-3xl font-bold">🎣 Emoji Fishing Game</h1>
    <div id="day-bar-container">
        <div id="day-bar"></div>
    </div>
    <div id="game-container">
        <div id="sky">
            <div class="clouds">☁️ ☁️ ☁️</div>
        </div>
        <div id="water">
            <div id="boat">🚤</div>
        </div>
    </div>
    <div id="fishing-grid-container">
        <p id="fishing-status">Find the fish!</p>
        <div id="fishing-grid"></div>
    </div>
    <div id="fish-tank">Fish Tank: <span id="caught-fish"></span></div>
    <button class="button" onclick="goToMarket()">Go to Market</button>
    <div id="market-screen">
        <h2>Market</h2>
        <div id="market-fish"></div>
        <p>Money: $<span id="money">0</span></p>
        <button class="button" onclick="buyBoat(1000, '⛵')">Buy ⛵ (1,000)</button>
        <button class="button" onclick="buyBoat(100000, '🚢')">Buy 🚢 (100,000)</button>
        <button class="button" onclick="startNewDay()">Start New Day</button>
    </div>
    <script>
        let money = parseInt(localStorage.getItem("money")) || 0;
        let boat = localStorage.getItem("boat") || "🚤";
        let fishTypes = { "🚤": ["🐟"], "⛵": ["🐟", "🐠"], "🚢": ["🐟", "🐠", "🦈"] };
        document.getElementById("boat").innerText = boat;
        document.getElementById("money").innerText = money;
        let caughtFish = [];
        function startFishingGame() {
            document.getElementById("fishing-grid-container").style.display = "block";
            let grid = document.getElementById("fishing-grid");
            grid.innerHTML = "";
            let fishPosition = Math.floor(Math.random() * 9);
            for (let i = 0; i < 9; i++) {
                let cell = document.createElement("div");
                cell.classList.add("grid-cell");
                cell.innerText = "🌊";
                if (i === fishPosition) {
                    setTimeout(() => {
                        cell.classList.add("shake");
                        setTimeout(() => {
                            cell.innerText = fishTypes[boat][Math.floor(Math.random() * fishTypes[boat].length)];
                            cell.onclick = () => catchFish(cell, true);
                        }, Math.random() * 975 + 25);
                    }, Math.random() * 975 + 25);
                } else {
                    cell.onclick = () => catchFish(cell, false);
                }
                grid.appendChild(cell);
            }
        }
        function catchFish(cell, success) {
            document.getElementById("fishing-grid-container").style.display = "none";
            if (success) {
                caughtFish.push(cell.innerText);
                document.getElementById("caught-fish").innerText = caughtFish.join(" ");
                document.getElementById("fishing-status").innerText = "Fish Caught! ✅";
            } else {
                document.getElementById("fishing-status").innerText = "Fish Got Away! 🛑";
            }
        }
        function updateDayBar() {
            let bar = document.getElementById("day-bar");
            let interval = setInterval(() => {
                let width = parseInt(bar.style.width) || 100;
                if (width > 0) {
                    width -= 1;
                    bar.style.width = width + "%";
                } else {
                    clearInterval(interval);
                    alert("Day Over");
                    goToMarket();
                }
            }, 1200);
        }
        updateDayBar();
        startFishingGame();
    </script>
</body>
</html>
